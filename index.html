<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BUKHARIYA EDUCATIONAL CENTRE – Student Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
    font-family: "Segoe UI", Arial, sans-serif;
    background:#eef2f7;
    margin:0;
    padding:20px;
}
.container{
    max-width:1000px;
    margin:auto;
}
.card{
    background:#fff;
    border-radius:16px;
    box-shadow:0 8px 24px rgba(0,0,0,.08);
    padding:30px;
}
.title{
    text-align:center;
    font-size:30px;
    font-weight:800;
    color:#1e3a8a;
}
.subtitle{
    text-align:center;
    font-size:17px;
    margin-top:6px;
    color:#0f766e;
    font-weight:600;
}
.date-row{
    text-align:center;
    margin-top:10px;
    font-size:14px;
    color:#444;
}

.search-box{
    display:flex;
    gap:10px;
    margin:25px 0;
}
.search-box input{
    flex:1;
    padding:14px;
    font-size:16px;
    border-radius:10px;
    border:1px solid #ccc;
}
.search-box button{
    padding:14px 26px;
    font-size:16px;
    border:none;
    border-radius:10px;
    background:#2563eb;
    color:#fff;
    cursor:pointer;
}
.search-box button:hover{background:#1e40af;}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
    gap:14px;
}
.box{
    padding:16px;
    border-radius:12px;
    color:#fff;
}
.blue{background:#2563eb}
.green{background:#16a34a}
.orange{background:#f59e0b}
.red{background:#dc2626}
.purple{background:#7c3aed}
.gray{background:#6b7280}

.label{
    font-size:13px;
    opacity:.9;
}
.value{
    font-size:18px;
    font-weight:700;
    margin-top:6px;
}

.signature-row{
    display:flex;
    gap:20px;
    margin-top:40px;
}
.sign-box{
    flex:1;
    border:2px dashed #999;
    border-radius:12px;
    padding:20px;
    min-height:110px;
}
.sign-title{
    font-weight:700;
    margin-bottom:6px;
}
.sign-sub{
    font-size:13px;
    color:#555;
}

.footer{
    margin-top:30px;
    font-size:13px;
    color:#333;
    line-height:1.6;
}
.footer b{color:#000}

.error{
    text-align:center;
    font-weight:700;
    color:#dc2626;
    margin-bottom:10px;
}

@media print{
    body{background:#fff}
    .search-box{display:none}
}
</style>
</head>

<body>
<div class="container">
<div class="card">

<div class="title">BUKHARIYA EDUCATIONAL CENTRE</div>
<div class="subtitle">Student Performance, Attendance & Discipline Tracker</div>
<div class="date-row">
Date: <span id="engDate"></span> | Hijri: <span id="hijriDate"></span>
</div>

<div class="search-box">
<input id="admission" placeholder="Enter Admission No (eg: B125)">
<button onclick="searchStudent()">Search</button>
</div>

<div id="error" class="error"></div>
<div id="result"></div>

<div class="signature-row">
    <div class="sign-box">
        <div class="sign-title">Parent / Guardian</div>
        <div class="sign-sub">Name & Signature</div>
    </div>
    <div class="sign-box">
        <div class="sign-title">Principal</div>
        <div class="sign-sub">Signature & Seal</div>
    </div>
</div>

<div class="footer">
<b>This is a computer generated report.</b><br>
Parents are requested to verify this report carefully and communicate with teachers to seek necessary guidance for the student’s progress.
<br><br>
<b>ഇത് ഒരു കമ്പ്യൂട്ടർ ജനറേറ്റഡ് റിപ്പോർട്ടാണ്.</b><br>
രക്ഷിതാക്കൾ ഈ റിപ്പോർട്ട് കൃത്യമായി പരിശോധിക്കുകയും, അധ്യാപകരുമായി ആശയവിനിമയം നടത്തി
വിദ്യാർത്ഥികളുടെ പുരോഗതിക്ക് ആവശ്യമായ നിർദ്ദേശങ്ങൾ ചോദിച്ചറിയുകയും ചെയ്യണം.
</div>

</div>
</div>

<script>
const TSV_URL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vRS0rtQ6QZb88rLYbBZftXtXieRPLNl7EEu_Eybr-30dmrhvedcNVAIEBFbzcm9DvXo4QZytZGzRzLX/pub?gid=346857694&single=true&output=tsv";

let rows=[];

fetch(TSV_URL)
.then(r=>r.text())
.then(t=>rows=t.trim().split("\n").map(r=>r.split("\t")));

function searchStudent(){
    const id=document.getElementById("admission").value.trim();
    const error=document.getElementById("error");
    const result=document.getElementById("result");
    error.textContent="";
    result.innerHTML="";

    const row=rows.find(r=>r[0]===id);
    if(!row){error.textContent="Admission number not found";return;}

    result.innerHTML=`
    <div class="grid">
        <div class="box blue"><div class="label">Student Name</div><div class="value">${row[1]}</div></div>
        <div class="box gray"><div class="label">Class Ustad</div><div class="value">${row[2]}</div></div>
        <div class="box purple"><div class="label">Month</div><div class="value">${row[3]}</div></div>
        <div class="box orange"><div class="label">Total Leaves</div><div class="value">${row[4]}</div></div>
        <div class="box green"><div class="label">Remaining Leaves</div><div class="value">${row[5]}</div></div>
        <div class="box blue"><div class="label">Lessons Memorized</div><div class="value">${row[6]}</div></div>
        <div class="box green"><div class="label">Pages Studied</div><div class="value">${row[7]}</div></div>
        <div class="box orange"><div class="label">Revisions Completed</div><div class="value">${row[8]}</div></div>
        <div class="box green"><div class="label">Behaviour</div><div class="value">${row[9]}</div></div>
        <div class="box blue"><div class="label">Discipline</div><div class="value">${row[10]}</div></div>
        <div class="box purple"><div class="label">Activities</div><div class="value">${row[11]}</div></div>
        <div class="box gray"><div class="label">Remarks</div><div class="value">${row[12]}</div></div>
        <div class="box blue"><div class="label">Parent Contact</div><div class="value">${row[13]}</div></div>
        <div class="box green"><div class="label">Feedback</div><div class="value">${row[14]}</div></div>
    </div>`;
}

// Dates
document.getElementById("engDate").textContent =
new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"});

document.getElementById("hijriDate").textContent =
new Intl.DateTimeFormat("en-TN-u-ca-islamic",{day:"numeric",month:"long",year:"numeric"}).format(new Date());
</script>

</body>
</html>
